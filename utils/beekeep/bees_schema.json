{
    "title" : "bees scene",
    "description" : "minimal structure of scene data in BEES application for monome:aleph"
    "$schema" : "http://json-schema.org/schema#"

    "type" : "object",

    
    "required": [ 
	"sceneName",
	"moduleName",
	"ops",
	"params"
    ],

    "properties" : {
	"sceneName" : { "type" : "string" },
	"moduleName" : { "type" : "string" },
	"moduleVersion" : { 
	    "type" : "object", 
	    "properties" : {
		"major" : { "type" : "integer" },
		"minor" : { "type" : "integer" },,
		"revision" : { "type" : "integer" }
	    }
	},

	"beesVersion" : { 
	    "type" : "object", 
	    "properties" : {
		"major" : { "type" : "integer" },
		"minor" : { "type" : "integer" },,
		"revision" : { "type" : "integer" }
	    }
	},

	"ops" : { 
	    "type" : "array", 
	    "items" : {
		"type" : "object"
		"properties" : {
		    "class" : { "type" : "integer" },
		    "name" : { "type" : "string" },
		    "ins" : { 
			"type" : "array", 
			"items" : { "$ref" : "#/definitions/opInput" }
		    }
		    "outs" : { 
			"type" : "array", 
			"items" : {
			    "$ref" : "#/definitions/opOutput" 
			}
		    }
		}
	    }
	},

	"params" : { 
	    "type" : "array", 
	    "items" : { "$ref" : "#/definitions/paramDescriptor" }
	}	

	"presets" : { 
	    "type" : "array", 
	    "items" : { 
		"oneOf" : [
		    { "$ref" : "#/definitions/presetInput" },
		    { "$ref" : "#/definitions/presetOutput" },
		    { "$ref" : "#/definitions/presetParam" },
		]
	    }
	}	

    },

    "definitions" : {
	"opInput" : { 
	    "type" : "object",
	    "properties" : {
		"name" : { "type" : "string" },
		"value" : { "type" : "integer" },
	    }
	},

	"opOutput" : { 
	    "type" : "object",
	    "properties" : {
		"name" : { "type" : "string" },
		"target" : { "$ref": "#/definitions/outputTarget" }
	    }
	},


	"paramDescriptor" : { 
	    "type" : "object",
	    "properties" : {
		"name" : { "type" : "string" },
		"class" : { "type" : "integer" },
		"min" : { "type" : "integer" },
		"max" : { "type" : "integer" },
		"radix" : { "type" : "integer" },
	    }
	},
	
	"outputTarget" : { 
	    "type" : "object",
	    "properties" : {
		"oneOf" : [
		    { 
			"paramName" : { "type" : "string" } 
		    },

		    { 
			"paramIdx" : { "type" : "integer" } 
			"paramName" : { "type" : "string" } 
		    },

		    { 
			"inIdx" : { "type" : "integer" },
		    },

		    { 
			"opIdx" : { "type" : "integer" },
			"opInIdx" : { "type" : "integer" },
		    },

		    { 
			"opIdx" : { "type" : "integer" },
			"opName" : { "type" : "string" },
			"opInIdx" : { "type" : "integer" },
			"opInName" : { "type" : "string" },
		    },
		]
	    },

	    "presetInput" : {
		"type" : "object",
		"properties" : {
		    "oneOf" : [
			{
			    "inIdx" : { "type" : "integer" },
			    "value" : { "type" : "integer" },
			},

			{ 
			    "opIdx" : { "type" : "integer" },
			    "opInIdx" : { "type" : "integer" },
			    "value" : { "type" : "integer" },
			},
			
			{ 
			    "opIdx" : { "type" : "integer" },
			    "opName" : { "type" : "string" },
			    "opInIdx" : { "type" : "integer" },
			    "opInName" : { "type" : "string" },
			    "value" : { "type" : "integer" },
			},
		    ]
		}
	    },

	    "presetOutput" : {
		"type" : "object",
		"properties" : {
		    "oneOf" : [
			{ 
			    "opIdx" : { "type" : "string" },
			    "outIdx" : { "type" : "integer" },
			    "target" :  { "$ref" : "#/definitions/outputTarget" }
			},
		    }
		}
	    },
			
	    "presetParam" : {
		"type" : "object",
		"properties" : {
		    "oneOf" : [
			{ 
			    "paramName" : { "type" : "string" },
			    "value" : { "type" : "integer" },
			},

			{ 
			    "paramIdx" : { "type" : "integer" },
			    "value" : { "type" : "integer" },
			},

			{ 
			    "paramIdx" : { "type" : "integer" },
			    "paramName" : { "type" : "string" },
			    "value" : { "type" : "integer" },
			}
		    ]
		}
	    }
	}	
    }

}